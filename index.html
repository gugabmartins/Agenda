<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="icons/favicon.png" type="image/x-icon">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agenda SmartG</title>
    <meta name="description" content="Agenda de Eventos">
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>

</head>
<body>
    <main>
        <div class="container" id="app">
            <h1>Agenda de Eventos</h1>
            <form id="eventForm" class="event-form">
                <input type="text" id="eventName" placeholder="Nome do Evento" required maxlength="20">
                <input type="date" id="eventDate" required>
                <div style="display: flex; align-items: center;"><input type="checkbox" id="eventImportant" valor="true">
                    <label class="eventImportance" for="eventImportant">Importante</label>
                </div>
                <button id="eventButton" type="submit" @click="addEvent()" >Adicionar Evento</button>
            </form>
            <div class="event-list-container">
                <div class="events-list" v-if="events.length === 0">
                    Nenhum evento agendado.
                </div>
            <div :class="['event-list', {'eventImportant-display': event.important }]" v-for="event in events" :key="event.name" >
                        {{ event.name }} <hr> {{ formatarData(event.date) }} <br> <div class="itens-event"> {{ event.important ? 'Importante' : 'Não Importante' }}

                        <img src="icons/trash.png" alt="Excluir Evento" class="delete-icon" @click="removerEvento(event)">
                        </div>
        </div></div>
    <footer>

    </footer>
    <script>
        const app = Vue.createApp({
            data() {
                return {
                    events: []
                }
            },
            methods: {
                addEvent() {
                    const eventName = document.getElementById('eventName').value;
                    const eventDate = document.getElementById('eventDate').value;
                    const eventImportant = document.getElementById('eventImportant').checked;
                    
                    // Verifica se os campos estão preenchidos  
                    if (eventName && eventDate) {
                        this.events.push({ name: eventName, date: eventDate, important: eventImportant });
                        this.events.sort((a, b) => new Date(a.date) - new Date(b.date));
                        localStorage.setItem('eventosSalvos', JSON.stringify(this.events));
                        document.getElementById('eventForm').reset();
                        console.log(`Evento adicionado: ${eventName} em ${eventDate}`);
                    } else {
                        alert("Por favor, preencha todos os campos.");
                    } 
                
                },
                        
                formatarData(dataISO) {
                    return new Date(dataISO).toLocaleDateString('pt-BR');
                },
                removerEvento(event) {
                    const index = this.events.indexOf(event);
                    if (index > -1) {
                        this.events.splice(index, 1);
                        localStorage.setItem('eventosSalvos', JSON.stringify(this.events));
                        console.log(`Evento removido: ${event.name}`);
                    }
                }
            },
            mounted() {
                const eventosSalvos = localStorage.getItem('eventosSalvos');
                if (eventosSalvos) {
                    this.events = JSON.parse(eventosSalvos);
                }
            }
        });

        app.mount('#app');
    </script>
</body>
</html>